<!-- Partial Template: TestUnit.SmartMaps -->
<b>SmartMaps-Maps, a single map component to display, edit markers, draw areas, measure or switch between many map types like: OpenStreet Maps, Google Maps V3</b>
<br>
<link rel="stylesheet" href="lib/js/jsmaps/theme/default/style.css" type="text/css">
<script type="text/javascript" src="lib/js/jsmaps/openlayers.js"></script>
<script type="text/javascript" src="lib/js/jsmaps/openlayers-google.js"></script>
<script type="text/javascript" src="lib/js/jsmaps/smart/smartmaps.js"></script>
<script type="text/javascript">
	//--
	var the_proxy_cache_url = ''; // some maps support proxy caching, but this is a custom feature :-) (document.URL.substring(0, document.URL.lastIndexOf('/')) + '/openstreetmaps-cache?page=')
	var the_proxy_buf_level = 0;
	//--
	OpenLayers.ImgPath = 'lib/js/jsmaps/img/';
	var MySmartMap = new Smart_Maps(the_proxy_cache_url, the_proxy_buf_level);
	MySmartMap.SetMapDivID('map1');
	MySmartMap.allowOperationEdit(5); // allow edit with as more as 5 markers
	MySmartMap.setDebug(1); // enable debug
	//--
	// Full Open Map(s): openstreetmap
	// Open Map(s): mapquest | mapquest-aerial | cyclemap | cyclemap-transport
	// Commercial Maps (Google v3): google | google-physical | google-hybrid | google-aerial
	var the_map_type = 'openstreetmap'; // the selected map
	//--
	//MySmartMap.Smart_Handler_SmartMaps_LoadMode('dynamic');
	//--
	function Init_SmartMaps() {
		//-- reset the Canvas (this is required for switching from a Map type to another (example: switch from Openstreetmaps to Googlemaps)
		$('#map1_canvas').html('<div id="map1" style="width: 760px; height: 480px; border: 1px solid #CCCCCC;"></div>');
		//-- draw the map
		MySmartMap.DrawMap(the_lat, the_lon, the_zoom, the_markers, the_areas, the_map_type);
		//--
	} //END FUNCTION
	//--
</script>
<script type="text/javascript">
	//--
	MySmartMap.setMarkerIcon('lib/js/jsmaps/img/marker.png', 21, 25);
	MySmartMap.setNewMarkerIcon('lib/js/jsmaps/img/marker-new.png', 21, 25); // this is optional, if we want a different icon for new markers
	MySmartMap.SetAreasStyle("#F00081", 0.5, 4, '#003399', 0.45);
	//--
	var MyMapChanged = false; // detect if map was changed to avoid duplicate the_markers in this context where is handled outside
	//--
	var the_markers = new Array();
	the_markers[0] = new Array('YELLOW', 51.5077381714115, -0.12793661349181304, 'Yellow Marker', 'http://www.google.com', 'lib/js/jsmaps/img/marker-gold.png');
	the_markers[1] = new Array('RED', 51.50809542821378, -0.12768985026245333);
	the_markers.push(new Array('GREEN', 51.507981907663954, -0.12838722460630453, '', '', 'lib/js/jsmaps/img/marker-green.png', 21, 25));
	//--
	var the_areas = new Array();
	the_areas[0] = new Array('AREA_3', 'multiline', 'MULTILINESTRING((-0.12867153876191076 51.50810588989021,-0.12839258902433973 51.508349624176105,-0.12799562209014656 51.50841306165318,-0.12750746004941751 51.50823944308537,-0.1273304342544618 51.50817266653673,-0.12716413729551365 51.50802241894459,-0.12727679007413653 51.5077152445485,-0.1272606968200578 51.50752159005994,-0.12742162936096177 51.507404729194825,-0.1275020956314182 51.50721107338704,-0.12790979140165487 51.507171006565386,-0.12812436812285713 51.50739137364845,-0.12900413267973515 51.50756499544793,-0.12853206389312974 51.507705227956954,-0.12922407381897263 51.50797233630414,-0.12867153876191076 51.50810588989021))');
	the_areas[1] = new Array('AREA_1', 'polygon', 'POLYGON((-0.12764157050016328 51.507905559363984,-0.12792052023777434 51.50860003475559,-0.1290363191879375 51.50842641690004,-0.12875736945032645 51.507731938862044,-0.12764157050016328 51.507905559363984))');
	//the_areas[2] = new Array('AREA_2', 'polygon', 'POLYGON((-0.1275020956314182 51.507297884712706,-0.1271536859701524 51.50768920477899,-0.12735189192589297 51.50811924522763,-0.1279806071379103 51.50833609618393,-0.12867153876187482 51.50821273247811,-0.12901994842314066 51.507821416908236,-0.12882174246740005 51.507391373648524,-0.12819302725538279 51.50717451819584,-0.1275020956314182 51.507297884712706))');
	//--
	var the_lat = 51.5077286;
	var the_lon = -0.1279688;
	var the_zoom = 18;
	//--
	function Measure_Management(opmode) {
		if(opmode == 0) {
			$('#SmartMapsMeasureControl').show();
			$('#SmartMapsMeasureControl').prop('disabled', false);
		} else {
			$('#SmartMapsMeasureControl').prop('disabled', 'disabled');
			$('#SmartMapsMeasureControl').hide();
		} //end if else
	} //END FUNCTION
	//--
	var GoogleMapsLoaded = false;
	function Render_SmartMaps() {
		//--
		if((the_map_type === 'google') || (the_map_type === 'google-physical') || (the_map_type === 'google-hybrid') || (the_map_type === 'google-aerial')) {
			(function(d) { // load the google maps javascript and callback later the Init_SmartMaps (after loading)
				if(GoogleMapsLoaded) {
					Init_SmartMaps();
				} else {
					GoogleMapsLoaded = true;
					var js;
					var id = 'googlemapsjs';
					var ref = d.getElementsByTagName('script')[0];
					js = d.createElement('script');
					js.id = id;
					js.async = true;
					js.type = "text/javascript";
					js.src = "//maps.google.com/maps/api/js?v=3.5&sensor=false&callback=Init_SmartMaps";
					ref.parentNode.insertBefore(js, ref);
				} //end if else
			}(document));
		} else {
			Init_SmartMaps();
		} //end if else
		//--
		$('#SmartMapsMeasureControl').val('');
		//--
	} //END FUNCTION
	//--
</script>
<div id="map1_debug" style="text-align: right; padding: 2px; position: fixed; bottom: 25px; right: 1px; font-size: 9px; width: 475px; background-color: #ECECEC; border: 1px solid #CCCCCC;">
	<button id="SmartMapsControlDebugMarkersData" onClick="MySmartMap.getMarkers('#');">DEBUG: View Markers Data</button>
	&nbsp;&nbsp;
	<button id="SmartMapsControlDebugMarkAreasData" onClick="MySmartMap.getMarkAreas('#');">DEBUG: View Areas Data</button>
	<br>
	<div id="map1_crrmap">&nbsp;</div>
	<div id="map1_tglonlat">&nbsp;</div>
	<div id="map1_coords">&nbsp;</div>
	<div id="map1_measure">&nbsp;</div>
</div>
<div style="background: #FFFFFF;">
	<span id="map1_data"></span><!-- form data for markers -->
	<span id="map1_adata"></span><!-- form data for areas -->
	<!-- form -->
		<!-- extra #start (this is required only for demo) -->
		<select id="SmartMapsControlType" onchange="MyMapChanged = true; the_zoom = MySmartMap.getCurrentZoom(); the_lat = MySmartMap.getCurrentLat(); the_lon = MySmartMap.getCurrentLon(); the_map_type = this.value; Render_SmartMaps();">
			<option value="openstreetmap">OpenStreet Maps</option>
			<option value="mapquest">OpenQuest Maps</option>
			<option value="cyclemap">OpenCycle Maps</option>
			<option value="google">Google StreetMaps</option>
			<option value="google-hybrid">GoogleMaps Hybrid</option>
			<option value="google-aerial">GoogleMaps Aerial</option>
			<option value="google-physical">Google PhysicalMaps</option>
		</select>
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		<!-- extra #end -->
		<select id="SmartMapsControlAction" style="width:225px;" onchange="$('#SmartMapsMeasureControl').val(''); Measure_Management(this.value); MySmartMap.OperationModeSwitch(this.value);">
			<option value="0">Display Mode: Display the Map</option>
			<option value="1">Edit Mode: Place Markers (Click on Map to place a Marker)</option>
			<option value="2">Edit Mode: Remove Markers (Click on a Marker to remove it)</option>
			<option value="3">Edit Mode: Draw / Remove Areas (Draw and Drag on the Map)</option>
		</select>
		<button id="SmartMapsControlMarkersClear" onClick="MySmartMap.clearUpMarkers();">Clear Markers</button>
		<button id="SmartMapsControlMarkAreasClear" onClick="MySmartMap.clearUpAreas();">Clear Areas</button>
		<select id="SmartMapsMeasureControl" style="width:140px;" onchange="MySmartMap.handleMeasures(this.value);">
			<option value=""># Measure Tools #</option>
			<option value="measure-distance">Measure Distance</option>
			<option value="measure-area">Measure Area</option>
		</select>
	<!-- end form -->
	<div id="map1_canvas"></div>
	<div style="text-align: center; font-size: 10px; width: 760px; color: #BBACAC; background-color: #FAFAFA; border: 1px solid #ECECEC;">
		<span id="map1_lonlat">&nbsp;</span>
	</div>
</div>
<script type="text/javascript">
	//--
	$('#SmartMapsControlType').val(the_map_type);
	//--
	var MyMapActionMode = 0;
	MySmartMap.OperationModeSwitch(MyMapActionMode);
	$('#SmartMapsControlAction').val(MyMapActionMode);
	Measure_Management(MyMapActionMode);
	//--
	Render_SmartMaps();
	//--
	//MySmartMap.RestrictExtent(19.5, 43.25, 30.5, 48.5); // example to restrict map to RO area
	//--
</script>
<br>
<!-- #END :: Partial Template: TestUnit.SmartMaps -->